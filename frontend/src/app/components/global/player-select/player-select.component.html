<div class="settings-container">
    <div *ngIf="currentPlayer" class="select-container">
        <select (change)="changePlayer($event)">
            <option *ngFor="let player of availablePlayers" [value]="player.name">
                {{player.name}}
            </option>
        </select>
        <button class="small-btn" (click)="addPlayer()">Add</button>
    </div>
    <div *ngIf="currentPlayer === null" class="select-container">
        <select disabled>
            <option>EMPTY</option>
        </select>
        <button disabled class="small-btn" (click)="addPlayer()">Add</button>
    </div>


    <div *ngIf="selectedTeams.length === 0">
        <div class="fw-lighter">EMPTY</div>
    </div>
    <div class="list-container">
        <div cdkDropList
             [cdkDropListData]="selectedTeams"
             (cdkDropListDropped)="drop($event)"
             [cdkDropListDisabled]="teamHostIndex >= 0"
             class="drag-container"
        >
            <div *ngFor="let team of selectedTeams;let i = index" class="drag-element">
                <button cdkDrag
                        (click)="mergeTeam(i)"
                        [disabled]="teamHostIndex === i"
                        [ngClass]="{'highlighted' : teamHostIndex >= 0 && i !== teamHostIndex}"
                        class="drag-player">
                    <span class="player-number">{{i + 1}}. </span>
                    <span class="player-name">{{team.name}}</span>

                    <!-- dragging preview -->
                    <div *cdkDragPreview class="drag-player">
                        <span class="player-number">{{i + 1}}. </span>
                        <span class="player-name">{{ team.name }}</span>
                    </div>
                </button>
            </div>
        </div>
        <div class="drag-container">
            <ng-container *ngFor="let _ of [].constructor(selectedTeams.length);let i = index">
                <div class="flex-container flex-row gap-2">
                    <div class="drag-element" (click)="makeHost(i)">
                        <i class="bi merge-icon" [ngClass]="teamHostIndex === i ? 'bi-people-fill' : 'bi-people'" ></i>
                    </div>
                    <div class="drag-element" (click)="removePlayer(i)">
                        <i class="bi bi-person-x-fill remove-icon"></i>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>