<table class="table">
    <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col" *ngFor="let team of gameState().gameConfig.teams">{{ team.name }}</th>
        <th scope="col">Duration</th>
        <th scope="col" *ngIf="showImages()">Image</th>
        <th scope="col" *ngIf="isEditable()">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let roundInfo of gameState().rounds;let i = index;">
        <th scope="row">{{ i + 1 }}</th>
        <td *ngFor="let round of roundInfo.results" class="score-cell">
            <span [class.closed]="round.hasClosed">{{ round.score }}</span>
            <span *ngIf="round.outInOne" class="out-in-one">â€¢</span>
        </td>
        <td>{{ getDuration(i) }}</td>
        <td *ngIf="showImages()">
            <div [lightbox]="i" [gallery]="galleryName">
                <img [ngSrc]="roundInfo.imageUrl" width="20" height="20" alt="" loading="lazy">
            </div>
        </td>
        <td *ngIf="isEditable()" style="width: 20px">
            <button class="btn btn-sm btn-primary" (click)="openRoundPopup(i)">
                <i class="bi bi-pencil-square"></i>
            </button>
        </td>
    </tr>
    </tbody>
    <tfoot>
    <tr class="table-light fw-bold">
        <th scope="row">Total</th>
        <td *ngFor="let team of gameState().gameConfig.teams">
            {{ getTotalScore(team) }}
        </td>
        <td>{{ getTotalDuration() }}</td>
        <td *ngIf="showImages()">-</td>
        <td *ngIf="isEditable()">-</td>
    </tr>
    </tfoot>
</table>

<jolly-round-popup #updateRoundPopup
                   [teams]="gameState().gameConfig.teams"
                   [rounds]="gameState().rounds"
                   (updateRoundEvent)="updateRound($event)"
/>